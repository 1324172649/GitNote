        addDebug();


/**
     * 活动模块，分享范围字段存储和使用规则
     * 处理数据库中 share_scope字段
     *  入库时,处理格式为id，type, 返回数据格式
     *  展示时，放入名称。返回数组格式
     * @param string $share_scope_json
     * @param bool $db_flag
     * @return array|mixed
     */

joywok/library/models/model_events.php
_handleShareScope



        /*include_once 'rabbitmq/publisher/usergroup.php';
        // 发送 用户组分享范围变更事件给MQ
        usergroup_publisher::getInstance()->usergroupScopeChange([
            'user' => $this->_user,
            'domain' => $this->_domain,
            'data' => [
                'otype' => 'jw_n_usergroup',
                'ugid' => 'df3f872538c9d0d20f44ac0858cf4263'
            ]
        ]);

        die;

        include_once 'rabbitmq/publisher/dept.php';
        // 发送 团队分享范围变更事件给MQ
        dept_publisher::getInstance()->deptScopeChange([
            'user' => $this->_user,
            'domain' => $this->_domain,
            'data' => [
                'otype' => 'jw_n_user',
                'uid' => $uid
            ]
        ]);
        die;*/



,
                    {
                        "id": "f65ca0dfecc78868324d3c13a2c4fbea",
                        "name": "èèå­",
                        "pinyin": "caicaizi",
                        "email": "caicai@iphoto.hk",
                        "type": "jw_n_user",
                        "status": 0,
                        "avatar": {
                            "avatar_s": "/public/images/avatar/s.jpg",
                            "avatar_l": "/public/images/avatar/l.jpg"
                        },
                        "mobile_cover": "/public/images/profile/default-bg-new.png",
                        "key": "f65ca0dfecc78868324d3c13a2c4fbeaèèå­",
                        "label": "èèå­",
                        "show_name": "èèå­",
                        "title": "èèå­"
                    }




        {
            "id": "IFlywYhFKaBPfDCD",
            "name": "å1é¨é¨",
            "type": "jw_n_dept",
            "avatar": {},
            "logo": "/public/images/group/def_b.png",
            "members_num": "1"
        },
        {
            "id": "4sSREVAUSBQedyqm",
            "name": "å­å¢é1",
            "type": "jw_n_dept",
            "avatar": {},
            "logo": "/public/images/group/def_b.png",
            "members_num": "0"
        },
        {
            "id": "df3f872538c9d0d20f44ac0858cf4263",
            "name": "112233",
            "type": "jw_n_usergroup",
            "avatar": {},
            "logo": "/public/images/avatar/usergroup.png",
            "members_num": "0"
        }
    $this->_db->insert

        $this->addRows();



/***
普通用户和管理员
添加和删除 时候请求obj_push的逻辑需要再理一下
当用户添加了成员或者管理员之后
再添加了动态成员 
再添加了普通成员 
这时候 obj_push的成员会不会重复

用户组跑批
joywok/runbatch/check_usergroup.php



if(!empty($uids)) {
            $members_uids = $this->_qwr->getNormalUserByids(array_column($uids, 'uid'));

            foreach ($uids as $uk => &$uv){
                foreach ($members_uids as $mk => $mv){
                    if($uv['uid'] == $mv['id']) $uv = array_merge($uv,$mv);
                }
            }
            /*if ($rm_flag) {
                foreach ($uids as $uv) {
                    if (!isset($members_uids[$uv['uid']])) continue;
                    $members_uids[$uv['uid']]['oid'] = $uv['oid'];
                }
            } else {
                foreach ($members_uids as $mk => $mv) {
                    foreach ($uids as $uuv) {
                        if ($mv['id'] == $uuv['uid']) $members_uids[$mk]['oid'] = $uuv['oid'];
                    }
                }
            }*/
        }

